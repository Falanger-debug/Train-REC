<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Your Journey</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Custom Styling -->
    <link rel="stylesheet" href="trainRoutesStyles.css">
    <link rel="stylesheet" href="/mainStyles.css">
    <link rel="stylesheet" href="/headerStyles.css">
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<%- include('partials/header') %>

<div class="container my-5">
    <h1 class="text-center mb-4">Plan Your Journey</h1>
    <div class="table-responsive">
        <table class="table table-striped table-hover text-center align-middle">
            <thead class="table-dark">
            <tr>
                <th>Action</th>
                <th>Departure</th>
                <th>Arrival</th>
                <th>Duration</th>
                <th>Connections</th>
                <th>Price</th>
            </tr>
            </thead>
            <tbody>
            <!-- Train 1 -->
            <tr>
                <td>
                    <div class="d-flex flex-column">
                        <a href="/buyTicket?from=08:00&to=09:30&duration=1h%2030m&connections=0&price=35&wherefrom=<%= connection.from %>&whereto=<%= connection.to %>" class="btn btn-primary btn-sm mb-2">
                            Buy Ticket
                            <i class="fas fa-ticket-alt"></i>
                        </a>
                        <button class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#trainDetailsModal" onclick="updateModal('Train A', '001', '<%= connection.from %>', '<%= connection.to %>')">
                            Train Details
                        </button>
                    </div>
                </td>
                <td>08:00</td>
                <td>09:30</td>
                <td>1h 30m</td>
                <td>0</td>
                <td>35.00 zł</td>
            </tr>
            <!-- Train 2 -->
            <tr>
                <td>
                    <div class="d-flex flex-column">
                        <a href="/buyTicket?from=10:00&to=11:45&duration=1h%2045m&connections=1&price=40&wherefrom=<%= connection.from %>&whereto=<%= connection.to %>" class="btn btn-primary btn-sm mb-2">
                            Buy Ticket
                            <i class="fas fa-ticket-alt"></i>
                        </a>
                        <button class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#trainDetailsModal" onclick="updateModal('Train B', '002', '<%= connection.from %>', '<%= connection.to %>')">
                            Train Details
                        </button>
                    </div>
                </td>
                <td>10:00</td>
                <td>11:45</td>
                <td>1h 45m</td>
                <td>1</td>
                <td>40.00 zł</td>
            </tr>
            <!-- Train 3 -->
            <tr>
                <td>
                    <div class="d-flex flex-column">
                        <a href="/buyTicket?from=12:00&to=13:30&duration=1h%2030m&connections=0&price=35&wherefrom=<%= connection.from %>&whereto=<%= connection.to %>" class="btn btn-primary btn-sm mb-2">
                            Buy Ticket
                            <i class="fas fa-ticket-alt"></i>
                        </a>
                        <button class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#trainDetailsModal" onclick="updateModal('Train C', '003', '<%= connection.from %>', '<%= connection.to %>')">
                            Train Details
                        </button>
                    </div>
                </td>
                <td>12:00</td>
                <td>13:30</td>
                <td>1h 30m</td>
                <td>0</td>
                <td>35.00 zł</td>
            </tr>
            <!-- Additional Trains -->
            <tr>
                <td>
                    <div class="d-flex flex-column">
                        <a href="/buyTicket?from=14:00&to=15:45&duration=1h%2045m&connections=2&price=50&wherefrom=<%= connection.from %>&whereto=<%= connection.to %>" class="btn btn-primary btn-sm mb-2">
                            Buy Ticket
                            <i class="fas fa-ticket-alt"></i>
                        </a>
                        <button class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#trainDetailsModal" onclick="updateModal('Train D', '004', '<%= connection.from %>', '<%= connection.to %>')">
                            Train Details
                        </button>
                    </div>
                </td>
                <td>14:00</td>
                <td>15:45</td>
                <td>1h 45m</td>
                <td>2</td>
                <td>50.00 zł</td>
            </tr>
            <tr>
                <td>
                    <div class="d-flex flex-column">
                        <a href="/buyTicket?from=16:00&to=17:30&duration=1h%2030m&connections=0&price=35&wherefrom=<%= connection.from %>&whereto=<%= connection.to %>" class="btn btn-primary btn-sm mb-2">
                            Buy Ticket
                            <i class="fas fa-ticket-alt"></i>
                        </a>
                        <button class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#trainDetailsModal" onclick="updateModal('Train E', '005', '<%= connection.from %>', '<%= connection.to %>')">
                            Train Details
                        </button>
                    </div>
                </td>
                <td>16:00</td>
                <td>17:30</td>
                <td>1h 30m</td>
                <td>0</td>
                <td>35.00 zł</td>
            </tr>
            <tr>
                <td>
                    <div class="d-flex flex-column">
                        <a href="/buyTicket?from=18:00&to=19:45&duration=1h%2045m&connections=1&price=45&wherefrom=<%= connection.from %>&whereto=<%= connection.to %>" class="btn btn-primary btn-sm mb-2">
                            Buy Ticket
                            <i class="fas fa-ticket-alt"></i>
                        </a>
                        <button class="btn btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#trainDetailsModal" onclick="updateModal('Train F', '006', '<%= connection.from %>', '<%= connection.to %>')">
                            Train Details
                        </button>
                    </div>
                </td>
                <td>18:00</td>
                <td>19:45</td>
                <td>1h 45m</td>
                <td>1</td>
                <td>45.00 zł</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="trainDetailsModal" tabindex="-1" aria-labelledby="trainDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="trainDetailsModalLabel">Train Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p><strong>Train Name:</strong> <span id="trainName"></span></p>
                <p><strong>Train Number:</strong> <span id="trainNumber"></span></p>
                <p><strong>Starting Station:</strong> <span id="trainFrom"></span></p>
                <p><strong>Ending Station:</strong> <span id="trainTo"></span></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<%- include('partials/footer') %>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function updateModal(name, number, from, to) {
        document.getElementById('trainName').textContent = name;
        document.getElementById('trainNumber').textContent = number;
        document.getElementById('trainFrom').textContent = from;
        document.getElementById('trainTo').textContent = to;
    }
</script>
</body>
</html>
